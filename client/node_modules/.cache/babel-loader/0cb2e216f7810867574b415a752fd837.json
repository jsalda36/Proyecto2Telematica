{"ast":null,"code":"var _jsxFileName = \"/home/paez/proyecto/joanapp/Proyecto2Telematica/client/src/components/posting.js\";\nimport React, { Component } from 'react';\nimport './styles/materialize/css/materialize.css';\nimport './styles/materialize/css/materialize.min.css';\nimport { Route, Link, BrowserRouter as Router } from 'react-router-dom';\n\nclass Posting extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      username: '',\n      title: '',\n      description: '',\n      date: '',\n      _id: '',\n      topics: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.addTask = this.addTask.bind(this);\n  }\n\n  handleChange(e) {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  addTask(e) {\n    e.preventDefault();\n\n    if (this.state._id) {\n      fetch(\"/api/topics/\".concat(this.state._id), {\n        method: 'PUT',\n        body: JSON.stringify({\n          title: this.state.title,\n          description: this.state.description,\n          date: this.state.date\n        }),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(data => {\n        this.setState({\n          _id: '',\n          title: '',\n          date: '',\n          description: ''\n        });\n        this.fetchTopics();\n      });\n    } else {\n      fetch('/api/topics', {\n        method: 'POST',\n        body: JSON.stringify(this.state),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(data => {\n        console.log(data);\n        this.setState({\n          title: '',\n          date: '',\n          description: ''\n        });\n        this.fetchTopics();\n      }).catch(err => console.error(err));\n    }\n  }\n\n  deleteTopic(id) {\n    fetch(\"/api/topics/\".concat(id), {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(data => {\n      this.fetchTopics();\n    });\n  }\n\n  editTopic(id) {\n    fetch(\"/api/topics/\".concat(id)).then(res => res.json()).then(data => {\n      console.log(data);\n      this.setState({\n        title: data.title,\n        description: data.description,\n        date: data.date,\n        _id: data._id\n      });\n    });\n  }\n\n  componentDidMount() {\n    if (this.props.location.state == undefined) {\n      this.props.history.push('/login');\n    } else {\n      this.setState({\n        username: this.props.location.state.username\n      });\n    }\n\n    this.fetchTopics();\n  }\n\n  fetchTopics() {\n    fetch('/api/topics').then(res => res.json()).then(data => {\n      this.setState({\n        topics: data\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      className: \"navbar navbar-expand-md navbar-dark bg-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-11\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      class: \"nav nav-tabs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      class: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: {\n        pathname: '/',\n        state: {\n          username: this.state.username\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Dashboard\")), React.createElement(\"li\", {\n      class: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      class: \"nav-link\",\n      href: \"posting\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Posting\")))), React.createElement(\"div\", {\n      className: \"col-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Log Out\"))), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.addTask,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"title\",\n      onChange: this.handleChange,\n      value: this.state.title,\n      type: \"text\",\n      placeholder: \"Task Title\",\n      autoFocus: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      name: \"description\",\n      onChange: this.handleChange,\n      value: this.state.description,\n      cols: \"30\",\n      rows: \"10\",\n      placeholder: \"Task Description\",\n      className: \"materialize-textarea\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn light-blue darken-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Send\"))))), React.createElement(\"div\", {\n      className: \"col s7\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Title\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Description\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, this.state.topics.map(topic => {\n      return React.createElement(\"tr\", {\n        key: topic._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, topic.title), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, topic.description), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: () => this.deleteTopic(topic._id),\n        className: \"btn light-blue darken-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"delete\")), React.createElement(\"button\", {\n        onClick: () => this.editTopic(topic._id),\n        className: \"btn light-blue darken-4\",\n        style: {\n          margin: '4px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"edit\"))));\n    })))))));\n  }\n\n}\n\nexport default Posting;","map":{"version":3,"sources":["/home/paez/proyecto/joanapp/Proyecto2Telematica/client/src/components/posting.js"],"names":["React","Component","Route","Link","BrowserRouter","Router","Posting","constructor","props","state","username","title","description","date","_id","topics","handleChange","bind","addTask","e","target","name","value","setState","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","json","data","fetchTopics","console","log","catch","err","error","deleteTopic","id","editTopic","componentDidMount","location","undefined","history","push","render","pathname","map","topic","margin"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './styles/materialize/css/materialize.css'\nimport './styles/materialize/css/materialize.min.css'\n\nimport { Route, Link, BrowserRouter as Router } from 'react-router-dom';\n\nclass Posting extends Component {\n\n  constructor(props) {\n    \n    super();\n    this.state = {\n      username: '',\n      title: '',\n      description: '',\n      date: '',\n      _id: '',\n      topics: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.addTask = this.addTask.bind(this);\n  }\n\n  handleChange(e) {\n    const { name, value } = e.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  addTask(e) {\n    e.preventDefault();\n    if(this.state._id) {\n      fetch(`/api/topics/${this.state._id}`, {\n        method: 'PUT',\n        body: JSON.stringify({\n          title: this.state.title,\n          description: this.state.description,\n          date: this.state.date\n        }),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n         \n          this.setState({_id: '', title: '', date:'',description: ''});\n          this.fetchTopics();\n        });\n    } else {\n\n      fetch('/api/topics', {\n        method: 'POST',\n        body: JSON.stringify(this.state),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n          console.log(data);\n   \n          this.setState({title: '', date:'',description: ''});\n          this.fetchTopics();\n        })\n        .catch(err => console.error(err));\n    }\n\n  }\n\n  deleteTopic(id) {\n    \n      fetch(`/api/topics/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n         \n          this.fetchTopics();\n        });\n    \n  }\n\n  editTopic(id) {\n    fetch(`/api/topics/${id}`)\n      .then(res => res.json())\n      .then(data => {\n        console.log(data);\n        this.setState({\n          title: data.title,\n          description: data.description,\n          date: data.date,\n          _id: data._id\n        });\n      });\n  }\n\n  componentDidMount() {\n    if(this.props.location.state==undefined){\n            \n      this.props.history.push('/login');\n    }\n    else{\n      this.setState({username:this.props.location.state.username});\n    }\n    this.fetchTopics();\n  }\n\n  fetchTopics() {\n    fetch('/api/topics')\n      .then(res => res.json())\n      .then(data => {\n        this.setState({topics: data});\n       \n      });\n  }\n\n  render() {\n    return (\n      <div> \n        <nav className=\"navbar navbar-expand-md navbar-dark bg-dark\">\n                <div className=\"col-11\">\n                    <ul class=\"nav nav-tabs\">\n                        <li class=\"nav-item\">\n                        <Link to={{\n                         pathname: '/',\n                                state: {\n                                username: this.state.username\n                                }\n                                }}>Dashboard</Link>\n                        \n                        </li>\n                        \n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"posting\">Posting</a>\n                        </li>\n\n                    </ul>\n                </div>\n                <div className=\"col-4\">\n                    <a href=\"\">Log Out</a>\n                </div>\n            </nav>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col s5\">\n              <div className=\"card\">\n                <div className=\"card-content\">\n                  <form onSubmit={this.addTask}>\n                    <div className=\"row\">\n                      <div className=\"input-field col s12\">\n                        <input name=\"title\" onChange={this.handleChange} value={this.state.title} type=\"text\" placeholder=\"Task Title\" autoFocus/>\n                      </div>\n                    </div>\n                    <div className=\"row\">\n                      <div className=\"input-field col s12\">\n                        <textarea name=\"description\" onChange={this.handleChange} value={this.state.description} cols=\"30\" rows=\"10\" placeholder=\"Task Description\" className=\"materialize-textarea\"></textarea>\n                      </div>\n                    </div>\n\n                    <button type=\"submit\" className=\"btn light-blue darken-4\">\n                      Send \n                    </button>\n                  </form>\n                </div>\n              </div>\n            </div>\n            <div className=\"col s7\">\n              <table>\n                <thead>\n                  <tr>\n                    <th>Title</th>\n                    <th>Description</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  { \n                    this.state.topics.map(topic => {\n                      return (\n                        <tr key={topic._id}>\n                          <td>{topic.title}</td>\n                          <td>{topic.description}</td>\n                          <td>\n                            <button onClick={() => this.deleteTopic(topic._id)} className=\"btn light-blue darken-4\">\n                              <i className=\"material-icons\">delete</i> \n                            </button>\n                            <button onClick={() => this.editTopic(topic._id)} className=\"btn light-blue darken-4\" style={{margin: '4px'}}>\n                              <i className=\"material-icons\">edit</i>\n                            </button>\n                          </td>\n                        </tr>\n                      )\n                    })\n                  }\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    )\n  }\n}\n\nexport default Posting;"]},"metadata":{},"sourceType":"module"}